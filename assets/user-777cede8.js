import{_ as ve}from"./DialogCloseBtn-5bcfb014.js";import{I as _e,aC as Ve,ax as ge,ah as he,s as w,aD as G,r as S,a0 as X,L as ye,M as be,d as e,N as $,G as A,ak as Ce,n as Ie,aE as De,aF as E,o as C,c as P,w as t,g as Y,a1 as ke,a4 as xe,i as _,h as B,k as we,f as i,V as Z,y as ee,m as O,e as h,$ as Se,u as Fe,a as Re,aG as Be,x as H,a6 as Pe,j as R,l as Ue,ad as ze,ae as $e}from"./index-6f3c4197.js";import{V as Ae}from"./VForm-83219e10.js";import{V as ae,a as b}from"./VRow-31f1bb8d.js";import{m as Ee,c as Me,u as Ne,b as J,f as je,d as Le,e as Te,V as M,a as K}from"./VTextField-0db26578.js";import{V as qe}from"./VChip-849010b8.js";import{V as Ge}from"./VDialog-8dfbab8f.js";import{a as Oe}from"./formatters-1588bd0d.js";import{V as He}from"./VDivider-8c007220.js";import{V as Je,a as Q,b as W}from"./VList-e7b3e0e3.js";import"./dialog-transition-4228480a.js";const Ke=_e()({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:a=>typeof a=="boolean"||[1e3,1024].includes(a)},...Ee({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:a=>Ve(a).every(s=>s!=null&&typeof s=="object")},...Me({clearable:!0})},emits:{"click:control":a=>!0,"mousedown:control":a=>!0,"update:focused":a=>!0,"update:modelValue":a=>!0},setup(a,s){let{attrs:m,emit:o,slots:r}=s;const{t:p}=ge(),u=he(a,"modelValue"),{isFocused:v,focus:I,blur:U}=Ne(a),n=w(()=>typeof a.showSize!="boolean"?a.showSize:void 0),c=w(()=>(u.value??[]).reduce((l,d)=>{let{size:D=0}=d;return l+D},0)),y=w(()=>G(c.value,n.value)),f=w(()=>(u.value??[]).map(l=>{const{name:d="",size:D=0}=l;return a.showSize?`${d} (${G(D,n.value)})`:d})),te=w(()=>{var d;const l=((d=u.value)==null?void 0:d.length)??0;return a.showSize?p(a.counterSizeString,l,y.value):p(a.counterString,l)}),N=S(),j=S(),V=S();function z(){var l;V.value!==document.activeElement&&((l=V.value)==null||l.focus()),v.value||I()}function le(l){L(l)}function se(l){o("mousedown:control",l)}function L(l){var d;(d=V.value)==null||d.click(),o("click:control",l)}function oe(l){l.stopPropagation(),z(),Ie(()=>{u.value=[],De(a["onClick:clear"],l)})}return X(u,l=>{(!Array.isArray(l)||!l.length)&&V.value&&(V.value.value="")}),ye(()=>{const l=!!(r.counter||a.counter),d=!!(l||r.details),[D,ne]=be(m),[{modelValue:na,...ue}]=J.filterProps(a),[ie]=je(a);return e(J,$({ref:N,modelValue:u.value,"onUpdate:modelValue":k=>u.value=k,class:["v-file-input",a.class],style:a.style,"onClick:prepend":le},D,ue,{focused:v.value}),{...r,default:k=>{let{id:F,isDisabled:x,isDirty:T,isReadonly:re,isValid:ce}=k;return e(Le,$({ref:j,"prepend-icon":a.prependIcon,onMousedown:se,onClick:L,"onClick:clear":oe,"onClick:prependInner":a["onClick:prependInner"],"onClick:appendInner":a["onClick:appendInner"]},ie,{id:F.value,active:T.value||v.value,dirty:T.value,disabled:x.value,focused:v.value,error:ce.value===!1}),{...r,default:de=>{var q;let{props:{class:fe,...me}}=de;return e(A,null,[e("input",$({ref:V,type:"file",readonly:re.value,disabled:x.value,multiple:a.multiple,name:a.name,onClick:g=>{g.stopPropagation(),z()},onChange:g=>{if(!g.target)return;const pe=g.target;u.value=[...pe.files??[]]},onFocus:z,onBlur:U},me,ne),null),e("div",{class:fe},[!!((q=u.value)!=null&&q.length)&&(r.selection?r.selection({fileNames:f.value,totalBytes:c.value,totalBytesReadable:y.value}):a.chips?f.value.map(g=>e(qe,{key:g,size:"small",color:a.color},{default:()=>[g]})):f.value.join(", "))])])}})},details:d?k=>{var F,x;return e(A,null,[(F=r.details)==null?void 0:F.call(r,k),l&&e(A,null,[e("span",null,null),e(Te,{active:!!((x=u.value)!=null&&x.length),value:te.value},r.counter)])])}:void 0})}),Ce({},N,j,V)}}),Qe=h("p",{class:"mb-0"}," Updating user details will receive a privacy audit. ",-1),We={__name:"UserInfoEditDialog",props:{userData:{type:Object,required:!1,default:()=>({id:0,name:"",email:"",photo:""})},isDialogVisible:{type:Boolean,required:!0}},emits:["submit","update:isDialogVisible"],setup(a,{emit:s}){const m=a,o=S(structuredClone(E(m.userData)));X(m,()=>{o.value=structuredClone(E(m.userData))});const r=()=>{s("update:isDialogVisible",!1);const n=new FormData;n.append("name",o.value.name),n.append("email",o.value.email),o.value.file&&n.append("userPhoto",o.value.file),s("submit",n)},p=()=>{s("update:isDialogVisible",!1),o.value=structuredClone(E(m.userData))},u=n=>{s("update:isDialogVisible",n)},v=n=>{const c=n.target.files[0],y=URL.createObjectURL(c);o.value.photo=y,o.value.file=c},I=n=>{o.value.name=n},U=n=>{o.value.email=n};return(n,c)=>{const y=ve;return C(),P(Ge,{width:n.$vuetify.display.smAndDown?"auto":500,"model-value":m.isDialogVisible,"onUpdate:modelValue":u},{default:t(()=>[e(y,{onClick:c[0]||(c[0]=f=>u(!1))}),e(Y,{class:"pa-sm-8 pa-5"},{default:t(()=>[e(ke,{class:"text-center"},{default:t(()=>[e(xe,{class:"text-h5 mb-3"},{default:t(()=>[_(" Edit User Information ")]),_:1}),Qe]),_:1}),e(B,null,{default:t(()=>[e(Ae,{class:"mt-6",onSubmit:we(r,["prevent"])},{default:t(()=>[e(ae,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[i(o).photo?(C(),P(Z,{key:0,md:"8",src:i(o).photo,height:"100"},null,8,["src"])):ee("",!0)]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(M,null,{default:t(()=>[_("Photo:")]),_:1}),e(Ke,{md:"4",accept:"image/png, image/jpeg","prepend-icon":"mdi-camera",onInput:c[1]||(c[1]=f=>v(f))})]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(M,null,{default:t(()=>[_("Username:")]),_:1}),e(K,{value:i(o).name,onInput:c[2]||(c[2]=f=>I(f.target.value))},null,8,["value"])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(M,null,{default:t(()=>[_("Email:")]),_:1}),e(K,{value:i(o).email,onInput:c[3]||(c[3]=f=>U(f.target.value))},null,8,["value"])]),_:1}),e(b,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:t(()=>[e(O,{type:"submit"},{default:t(()=>[_(" Submit ")]),_:1}),e(O,{color:"secondary",variant:"tonal",onClick:p},{default:t(()=>[_(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}};const Xe=a=>(ze("data-v-035f95f2"),a=a(),$e(),a),Ye={key:1,class:"text-5xl font-weight-medium"},Ze={class:"text-h4 mt-4"},ea=Xe(()=>h("p",{class:"text-sm text-uppercase text-disabled"},"Details",-1)),aa={class:"text-h6"},ta={class:"text-body-1"},la={class:"text-h6"},sa={class:"text-body-1"},oa={__name:"user",setup(a){const s=Fe(),m=Re(),o=S(!1);Be(async()=>{try{await s.getInfo()}catch{m.replace("/login")}});async function r(p){await s.updateInfo(p),s.getInfo()}return(p,u)=>{const v=We;return C(),H("div",null,[e(ae,null,{default:t(()=>[e(b,{cols:"12",md:"4"},{default:t(()=>[i(s).user?(C(),P(Y,{key:0},{default:t(()=>[e(B,{class:"text-center pt-15"},{default:t(()=>[e(Pe,{rounded:"",size:100,color:i(s).user.avatar?void 0:"primary",variant:i(s).user.avatar?void 0:"tonal"},{default:t(()=>[i(s).user.photo?(C(),P(Z,{key:0,src:i(s).user.photo},null,8,["src"])):(C(),H("span",Ye,R(i(Oe)(i(s).user.name)),1))]),_:1},8,["color","variant"]),h("h6",Ze,R(i(s).user.name),1)]),_:1}),e(He),e(B,null,{default:t(()=>[ea,e(Je,{class:"card-list mt-2"},{default:t(()=>[e(Q,null,{default:t(()=>[e(W,null,{default:t(()=>[h("h6",aa,[_(" Username: "),h("span",ta,R(i(s).user.name),1)])]),_:1})]),_:1}),e(Q,null,{default:t(()=>[e(W,null,{default:t(()=>[h("h6",la,[_(" Email: "),h("span",sa,R(i(s).user.email),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(B,{class:"d-flex justify-center"})]),_:1})):ee("",!0)]),_:1})]),_:1}),e(v,{isDialogVisible:i(o),"onUpdate:isDialogVisible":u[0]||(u[0]=I=>Ue(o)?o.value=I:null),"user-data":i(s).user,onSubmit:r},null,8,["isDialogVisible","user-data"])])}}},ga=Se(oa,[["__scopeId","data-v-035f95f2"]]);export{ga as default};
