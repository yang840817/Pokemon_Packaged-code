import{u as Le}from"./cart-b3ea6918.js";import{al as Ae,r as p,am as Ke,aX as _e,an as Oe,aY as Be,I as pe,J as be,at as ke,ax as Ce,ah as se,s as F,aC as ve,L as Ve,d as o,G as ce,N,aZ as xe,i as R,ak as we,aa as Ee,f as G,a_ as Re,ay as Ne,a0 as ne,n as he,$ as Ue,p as je,a as $e,aG as He,o as ue,c as de,w as A,g as ze,x as Ge,A as Ye,e as D,j as ye,m as fe,h as Qe,a7 as Je,V as We,ad as Xe,ae as Ze}from"./index-6f3c4197.js";import{a as qe,V as ge}from"./VRow-31f1bb8d.js";import{m as et,u as Ie,V as me,a as te,t as oe}from"./VList-e7b3e0e3.js";import{V as tt,a as at}from"./VToolbar-94627374.js";import{i as Se,j as Fe,a as re}from"./VTextField-0db26578.js";import{V as lt}from"./dialog-transition-4228480a.js";import{V as De}from"./VMenu-f96276e7.js";import{V as Pe}from"./VCheckboxBtn-2b9e32ef.js";import{V as Te}from"./VChip-849010b8.js";import"./VDivider-8c007220.js";const nt=Ae("payments",()=>{const e=p(""),s=p(""),t=p(""),n=p("");async function I(){try{const{data:d}=await Ke.post("/payments");e.value=d.original.payment_url,s.value=d.original.mid,t.value=d.original.hash,n.value=d.original.edata1}catch(d){return Promise.reject(d)}}return{payment_url:e,mid:s,hash:t,edata1:n,getNewebpayPayments:I}});const Me=_e({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Oe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:Be},...et({itemChildren:!1})},"v-select");pe()({name:"VSelect",props:{...Me(),...be(Se({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ke({transition:{component:lt}})},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:t}=s;const{t:n}=Ce(),I=p(),d=p(),y=se(e,"menu"),f=F({get:()=>y.value,set:u=>{var v;y.value&&!u&&((v=d.value)!=null&&v.ΨopenChildren)||(y.value=u)}}),{items:_,transformIn:b,transformOut:c}=Ie(e),l=se(e,"modelValue",[],u=>b(ve(u)),u=>{const v=c(u);return e.multiple?v:v[0]??null}),r=Fe(),V=F(()=>l.value.map(u=>_.value.find(v=>e.valueComparator(v.value,u.value))||u)),O=F(()=>V.value.map(u=>u.props.value)),U=p(!1);let B="",J;const j=F(()=>e.hideSelected?_.value.filter(u=>!V.value.some(v=>v===u)):_.value),g=p();function Y(u){e.openOnClear&&(f.value=!0)}function Q(){e.hideNoData&&!_.value.length||e.readonly||r!=null&&r.isReadonly.value||(f.value=!f.value)}function k(u){var m,K,x,T;if(e.readonly||r!=null&&r.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(u.key)&&u.preventDefault(),["Enter","ArrowDown"," "].includes(u.key)&&(f.value=!0),["Escape","Tab"].includes(u.key)&&(f.value=!1),u.key==="ArrowDown"?(m=g.value)==null||m.focus("next"):u.key==="ArrowUp"?(K=g.value)==null||K.focus("prev"):u.key==="Home"?(x=g.value)==null||x.focus("first"):u.key==="End"&&((T=g.value)==null||T.focus("last"));const v=1e3;function P(S){const M=S.key.length===1,a=!S.ctrlKey&&!S.metaKey&&!S.altKey;return M&&a}if(e.multiple||!P(u))return;const W=performance.now();W-J>v&&(B=""),B+=u.key.toLowerCase(),J=W;const X=_.value.find(S=>S.title.toLowerCase().startsWith(B));X!==void 0&&(l.value=[X])}function $(u){if(e.multiple){const v=O.value.findIndex(P=>e.valueComparator(P,u.value));if(v===-1)l.value=[...l.value,u];else{const P=[...l.value];P.splice(v,1),l.value=P}}else l.value=[u],f.value=!1}function ie(u){var v;(v=g.value)!=null&&v.$el.contains(u.relatedTarget)||(f.value=!1)}function H(u){U.value=!0}function q(u){var v;u.relatedTarget==null&&((v=I.value)==null||v.focus())}return Ve(()=>{const u=!!(e.chips||t.chip),v=!!(!e.hideNoData||j.value.length||t.prepend||t.append||t["no-data"]),P=l.value.length>0,[W]=re.filterProps(e),X=P||!U.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return o(re,N({ref:I},W,{modelValue:l.value.map(m=>m.props.value).join(", "),"onUpdate:modelValue":m=>{m==null&&(l.value=[])},focused:U.value,"onUpdate:focused":m=>U.value=m,validationValue:l.externalValue,dirty:P,class:["v-select",{"v-select--active-menu":f.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":l.value.length},e.class],style:e.style,appendInnerIcon:e.menuIcon,readonly:!0,placeholder:X,"onClick:clear":Y,"onMousedown:control":Q,onBlur:ie,onKeydown:k}),{...t,default:()=>o(ce,null,[o(De,N({ref:d,modelValue:f.value,"onUpdate:modelValue":m=>f.value=m,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[v&&o(me,{ref:g,selected:O.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:m=>m.preventDefault(),onFocusin:H,onFocusout:q},{default:()=>{var m,K,x;return[!j.value.length&&!e.hideNoData&&(((m=t["no-data"])==null?void 0:m.call(t))??o(te,{title:n(e.noDataText)},null)),(K=t["prepend-item"])==null?void 0:K.call(t),j.value.map((T,S)=>{var M;return t.item?(M=t.item)==null?void 0:M.call(t,{item:T,index:S,props:N(T.props,{onClick:()=>$(T)})}):o(te,N({key:S},T.props,{onClick:()=>$(T)}),{prepend:a=>{let{isSelected:i}=a;return e.multiple&&!e.hideSelected?o(Pe,{modelValue:i,ripple:!1,tabindex:"-1"},null):void 0}})}),(x=t["append-item"])==null?void 0:x.call(t)]}})]}),V.value.map((m,K)=>{var S;function x(M){M.stopPropagation(),M.preventDefault(),$(m)}const T={"onClick:close":x,modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:m.value,class:"v-select__selection"},[u?t.chip?o(xe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:m.title}}},{default:()=>{var M;return[(M=t.chip)==null?void 0:M.call(t,{item:m,index:K,props:T})]}}):o(Te,N({key:"chip",closable:e.closableChips,size:"small",text:m.title},T),null):((S=t.selection)==null?void 0:S.call(t,{item:m,index:K}))??o("span",{class:"v-select__selection-text"},[m.title,e.multiple&&K<V.value.length-1&&o("span",{class:"v-select__selection-comma"},[R(",")])])])})])})}),we({isFocused:U,menu:f,select:$},I)}});const ut=(e,s,t)=>e==null||s==null?-1:e.toString().toLocaleLowerCase().indexOf(s.toString().toLocaleLowerCase()),ot=_e({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function st(e,s,t){var f;const n=[],I=(t==null?void 0:t.default)??ut,d=t!=null&&t.filterKeys?ve(t.filterKeys):!1,y=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return n;e:for(let _=0;_<e.length;_++){const b=e[_],c={},l={};let r=-1;if(s&&!(t!=null&&t.noFilter)){if(typeof b=="object"){const U=d||Object.keys(b);for(const B of U){const J=Re(b,B,b),j=(f=t==null?void 0:t.customKeyFilter)==null?void 0:f[B];if(r=j?j(J,s,b):I(J,s,b),r!==-1&&r!==!1)j?c[B]=r:l[B]=r;else if((t==null?void 0:t.filterMode)==="every")continue e}}else r=I(b,s,b),r!==-1&&r!==!1&&(l.title=r);const V=Object.keys(l).length,O=Object.keys(c).length;if(!V&&!O||(t==null?void 0:t.filterMode)==="union"&&O!==y&&!V||(t==null?void 0:t.filterMode)==="intersection"&&(O!==y||!V))continue}n.push({index:_,matches:{...l,...c}})}return n}function rt(e,s,t,n){const I=F(()=>typeof(t==null?void 0:t.value)!="string"&&typeof(t==null?void 0:t.value)!="number"?"":String(t.value)),d=p([]),y=p(new Map);Ee(()=>{d.value=[],y.value=new Map;const _=G(s);st(_,I.value,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:G(n==null?void 0:n.filterKeys)??e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}).forEach(c=>{let{index:l,matches:r}=c;const V=_[l];d.value.push(V),y.value.set(V.value,r)})});function f(_){return y.value.get(_.value)}return{filteredItems:d,filteredMatches:y,getMatches:f}}function ct(e,s,t){if(s==null)return e;if(Array.isArray(s))throw new Error("Multiple matches is not implemented");return typeof s=="number"&&~s?o(ce,null,[o("span",{class:"v-combobox__unmask"},[e.substr(0,s)]),o("span",{class:"v-combobox__mask"},[e.substr(s,t)]),o("span",{class:"v-combobox__unmask"},[e.substr(s+t)])]):e}const it=pe()({name:"VCombobox",props:{delimiters:Array,...ot({filterKeys:["title"]}),...Me({hideNoData:!0,returnObject:!0}),...be(Se({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ke({transition:!1})},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,s){var M;let{emit:t,slots:n}=s;const{t:I}=Ce(),d=p(),y=p(!1),f=p(!0),_=p(),b=se(e,"menu"),c=F({get:()=>b.value,set:a=>{var i;b.value&&!a&&((i=_.value)!=null&&i.ΨopenChildren)||(b.value=a)}}),l=p(-1);let r=!1;const V=F(()=>{var a;return(a=d.value)==null?void 0:a.color}),{items:O,transformIn:U,transformOut:B}=Ie(e),{textColorClasses:J,textColorStyles:j}=Ne(V),g=se(e,"modelValue",[],a=>U(ve(a)),a=>{const i=B(a);return e.multiple?i:i[0]??null}),Y=Fe(),Q=p(e.multiple?"":((M=g.value[0])==null?void 0:M.title)??""),k=F({get:()=>Q.value,set:a=>{var i;if(Q.value=a,e.multiple||(g.value=[oe(e,a)]),a&&e.multiple&&((i=e.delimiters)!=null&&i.length)){const w=a.split(new RegExp(`(?:${e.delimiters.join("|")})+`));w.length>1&&(w.forEach(z=>{z=z.trim(),z&&x(oe(e,z))}),Q.value="")}a||(l.value=-1),f.value=!a}});ne(Q,a=>{r?he(()=>r=!1):y.value&&!c.value&&(c.value=!0),t("update:search",a)}),ne(g,a=>{var i;e.multiple||(Q.value=((i=a[0])==null?void 0:i.title)??"")});const{filteredItems:$,getMatches:ie}=rt(e,O,F(()=>f.value?void 0:k.value)),H=F(()=>g.value.map(a=>O.value.find(i=>e.valueComparator(i.value,a.value))||a)),q=F(()=>e.hideSelected?$.value.filter(a=>!H.value.some(i=>i.value===a.value)):$.value),u=F(()=>H.value.map(a=>a.props.value)),v=F(()=>H.value[l.value]),P=p();function W(a){r=!0,e.openOnClear&&(c.value=!0)}function X(){e.hideNoData&&!O.value.length||e.readonly||Y!=null&&Y.isReadonly.value||(c.value=!0)}function m(a){var z,h;if(e.readonly||Y!=null&&Y.isReadonly.value)return;const i=d.value.selectionStart,w=u.value.length;if((l.value>-1||["Enter","ArrowDown","ArrowUp"].includes(a.key))&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(c.value=!0),["Escape"].includes(a.key)&&(c.value=!1),["Enter","Escape","Tab"].includes(a.key)&&(f.value=!0),a.key==="ArrowDown"?(z=P.value)==null||z.focus("next"):a.key==="ArrowUp"&&((h=P.value)==null||h.focus("prev")),!!e.multiple){if(["Backspace","Delete"].includes(a.key)){if(l.value<0){a.key==="Backspace"&&!k.value&&(l.value=w-1);return}const C=l.value;v.value&&x(v.value),l.value=C>=w-1?w-2:C}if(a.key==="ArrowLeft"){if(l.value<0&&i>0)return;const C=l.value>-1?l.value-1:w-1;H.value[C]?l.value=C:(l.value=-1,d.value.setSelectionRange(k.value.length,k.value.length))}if(a.key==="ArrowRight"){if(l.value<0)return;const C=l.value+1;H.value[C]?l.value=C:(l.value=-1,d.value.setSelectionRange(0,0))}a.key==="Enter"&&k.value&&(x(oe(e,k.value)),k.value="")}}function K(){y.value&&(f.value=!0)}function x(a){if(e.multiple){const i=u.value.findIndex(w=>e.valueComparator(w,a.value));if(i===-1)g.value=[...g.value,a];else{const w=[...g.value];w.splice(i,1),g.value=w}k.value=""}else g.value=[a],Q.value=a.title,he(()=>{c.value=!1,f.value=!0})}function T(a){y.value=!0}function S(a){var i;a.relatedTarget==null&&((i=d.value)==null||i.focus())}return ne($,a=>{!a.length&&e.hideNoData&&(c.value=!1)}),ne(y,a=>{if(a)l.value=-1;else{if(c.value=!1,!e.multiple||!k.value)return;g.value=[...g.value,oe(e,k.value)],k.value=""}}),Ve(()=>{const a=!!(e.chips||n.chip),i=!!(!e.hideNoData||q.value.length||n.prepend||n.append||n["no-data"]),w=g.value.length>0,[z]=re.filterProps(e);return o(re,N({ref:d},z,{modelValue:k.value,"onUpdate:modelValue":[h=>k.value=h,h=>{h==null&&(g.value=[])}],focused:y.value,"onUpdate:focused":h=>y.value=h,validationValue:g.externalValue,dirty:w,class:["v-combobox",{"v-combobox--active-menu":c.value,"v-combobox--chips":!!e.chips,"v-combobox--selecting-index":l.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,appendInnerIcon:e.items.length?e.menuIcon:void 0,readonly:e.readonly,placeholder:w?void 0:e.placeholder,"onClick:clear":W,"onMousedown:control":X,onKeydown:m}),{...n,default:()=>o(ce,null,[o(De,N({ref:_,modelValue:c.value,"onUpdate:modelValue":h=>c.value=h,activator:"parent",contentClass:"v-combobox__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:K},e.menuProps),{default:()=>[i&&o(me,{ref:P,selected:u.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:h=>h.preventDefault(),onFocusin:T,onFocusout:S},{default:()=>{var h,C,ae;return[!q.value.length&&!e.hideNoData&&(((h=n["no-data"])==null?void 0:h.call(n))??o(te,{title:I(e.noDataText)},null)),(C=n["prepend-item"])==null?void 0:C.call(n),q.value.map(L=>{var ee;return((ee=n.item)==null?void 0:ee.call(n,{item:L,props:N(L.props,{onClick:()=>x(L)})}))??o(te,N({key:L.value},L.props,{onClick:()=>x(L)}),{prepend:E=>{let{isSelected:le}=E;return e.multiple&&!e.hideSelected?o(Pe,{modelValue:le,ripple:!1,tabindex:"-1"},null):void 0},title:()=>{var E,le;return f.value?L.title:ct(L.title,(E=ie(L))==null?void 0:E.title,((le=k.value)==null?void 0:le.length)??0)}})}),(ae=n["append-item"])==null?void 0:ae.call(n)]}})]}),H.value.map((h,C)=>{var ee;function ae(E){E.stopPropagation(),E.preventDefault(),x(h)}const L={"onClick:close":ae,modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:h.value,class:["v-combobox__selection",C===l.value&&["v-combobox__selection--selected",J.value]],style:C===l.value?j.value:{}},[a?n.chip?o(xe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:h.title}}},{default:()=>{var E;return[(E=n.chip)==null?void 0:E.call(n,{item:h,index:C,props:L})]}}):o(Te,N({key:"chip",closable:e.closableChips,size:"small",text:h.title},L),null):((ee=n.selection)==null?void 0:ee.call(n,{item:h,index:C}))??o("span",{class:"v-combobox__selection-text"},[h.title,e.multiple&&C<H.value.length-1&&o("span",{class:"v-combobox__selection-comma"},[R(",")])])])})])})}),we({isFocused:y,isPristine:f,menu:c,search:k,selectionIndex:l,filteredItems:$,select:x},d)}}),Z=e=>(Xe("data-v-566a275b"),e=e(),Ze(),e),dt={class:"d-flex align-center"},ft={class:"mr-5"},vt={class:"d-flex"},mt=["action"],ht=["value"],yt=Z(()=>D("br",null,null,-1)),gt=["value"],_t=Z(()=>D("br",null,null,-1)),pt=["value"],bt=Z(()=>D("br",null,null,-1)),kt=Z(()=>D("input",{type:"text",name:"Version",value:"2.0"},null,-1)),Ct=Z(()=>D("br",null,null,-1)),Vt={class:"w-100 text-center"},xt=Z(()=>D("p",null,"Your shopping cart is empty, go to add items",-1)),wt={__name:"cart",setup(e){const s=Le(),t=je(),n=nt(),I=$e(),d=p(null),y=F(()=>s.cartItemList.totalPrice===0);He(async()=>{try{await s.getCart()}catch{I.replace("/login")}});async function f(c,l){try{await s.updateItem(c,l),t.message="Update Successfully",t.isShow=!0,t.timeout=1500,t.noticeType(!0),s.getCart()}catch(r){s.getCart(),t.message=r.response.data.error,t.isShow=!0,t.timeout=5e3,t.noticeType(!1)}}async function _(c){try{await s.deleteItem(c),t.message="Already remove from your cart!",t.isShow=!0,t.timeout=1500,t.noticeType(!0),s.getCart()}catch{}}async function b(){try{await n.getNewebpayPayments(),d.value.submit()}catch{}}return(c,l)=>G(y)?(ue(),de(ge,{key:1},{default:A(()=>[D("div",Vt,[o(fe,{to:"/shop",class:"my-12"},{default:A(()=>[R(" Go to Shop ")]),_:1}),o(We,{alt:"Coming Soon","max-height":500}),xt])]),_:1})):(ue(),de(ge,{key:0,class:"justify-center"},{default:A(()=>[o(qe,{cols:"12"},{default:A(()=>[o(ze,null,{default:A(()=>[o(me,null,{default:A(()=>[o(tt,{color:"rgba(100, 0, 0, 0)"},{default:A(()=>[o(at,null,{default:A(()=>[R("Cart List")]),_:1})]),_:1}),(ue(!0),Ge(ce,null,Ye(G(s).cartItemList.data,r=>(ue(),de(te,{key:r.id,title:r.race_name,"prepend-avatar":r.race_photo,height:"80"},{append:A(()=>[D("div",dt,[D("span",ft,"$"+ye(Number(r.current_price)*r.amount),1),o(it,{class:"flex-grow-0","onUpdate:modelValue":V=>f(r.race_id,V),"model-value":r.amount,items:[1,2,3,4,5,6,7,8,8,9,10],variant:"outlined"},null,8,["onUpdate:modelValue","model-value"]),o(fe,{class:"ml-2",icon:"mdi-trash-can",color:"#FF384D",onClick:V=>_(r.id)},null,8,["onClick"])])]),_:2},1032,["title","prepend-avatar"]))),128))]),_:1}),D("div",vt,[o(Qe,null,{default:A(()=>[R("Total Price: $ "+ye(G(s).cartItemList.totalPrice),1)]),_:1}),o(Je,null,{default:A(()=>[o(fe,{onClick:b},{default:A(()=>[R("Purchase")]),_:1})]),_:1})])]),_:1}),D("form",{ref_key:"newebpayForm",ref:d,class:"d-none",name:"Spgateway",action:G(n).payment_url,method:"POST"},[R(" MerchantID: "),D("input",{type:"text",name:"MerchantID",value:G(n).mid},null,8,ht),yt,R(" TradeInfo: "),D("input",{type:"text",name:"TradeInfo",value:G(n).edata1},null,8,gt),_t,R(" TradeSha: "),D("input",{type:"text",name:"TradeSha",value:G(n).hash},null,8,pt),bt,R(" Version: "),kt,Ct],8,mt)]),_:1})]),_:1}))}},Bt=Ue(wt,[["__scopeId","data-v-566a275b"]]);export{Bt as default};
