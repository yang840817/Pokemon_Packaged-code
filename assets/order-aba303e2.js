import{_ as w}from"./DialogCloseBtn-82c0f0df.js";import{aC as B,r as V,aD as D,o as n,c as _,w as e,d as t,g as v,ak as b,am as T,i as p,x as y,G as x,A as C,f,j as g,e as O,m as S,h as L,p as N,a as A,bg as q,b9 as I,ao as j,H as k,l as P}from"./index-a869956f.js";import{V as R}from"./VDialog-b60079b2.js";import{V as U,a as H}from"./VToolbar-48ef7c5a.js";import{V as M}from"./VSpacer-975eab34.js";import{V as Y,a as z}from"./VList-1c4badbc.js";import"./dialog-transition-705acc24.js";import"./VDivider-1cbdaecd.js";const h=B("order",()=>{const m=V({}),s=V({});async function l(){try{const{data:r}=await D.get("/orders");m.value=r.data}catch(r){return Promise.reject(r)}}async function d(r){try{const{data:a}=await D.get(`/orders/${r}/order_details`);s.value=a.data}catch(a){return Promise.reject(a)}}return{orderList:m,orderDetail:s,getOrder:l,getOrderDetail:d}}),E={__name:"OrderDetailDialog",props:{orderDetail:{type:Array,required:!1,default:()=>[{id:363,race_name:"charizard",quantity:5,unit_price:403,subtotal_price:2015}]},isDialogVisible:{type:Boolean,required:!0}},emits:["submit","update:isDialogVisible"],setup(m,{emit:s}){const l=m,d=h(),r=a=>{s("update:isDialogVisible",a)};return(a,c)=>{const i=w;return n(),_(R,{width:a.$vuetify.display.smAndDown?"auto":500,"model-value":l.isDialogVisible,"onUpdate:modelValue":r},{default:e(()=>[t(i,{onClick:c[0]||(c[0]=o=>r(!1))}),t(v,{class:"pa-sm-8 pa-5"},{default:e(()=>[t(b,{class:"text-center"},{default:e(()=>[t(T,{class:"text-h5 mb-3"},{default:e(()=>[p(" Order_No: Details ")]),_:1}),(n(!0),y(x,null,C(f(d).orderDetail,o=>(n(),_(b,{key:o.id},{default:e(()=>[p(g(o.race_name),1)]),_:2},1024))),128)),O("pre",null,g(f(d).orderDetail),1),t(S,{onClick:c[1]||(c[1]=o=>r(!1))},{default:e(()=>[p("Close")]),_:1})]),_:1}),t(L)]),_:1})]),_:1},8,["width","model-value"])}}},F=O("pre",null,`    {
    "id": 176,
    "order_no": "202311000003",
    "user_name": "Yang You",
    "total_price": 155,
    "payment_method": "credit_card",
    "payment_status": "paid",
    "created_at": "2023-11-23T08:18:59.000000Z"
  }
  `,-1),ae={__name:"order",setup(m){const s=h(),l=N(),d=A(),r=q(),a=V(!1);I(async()=>{try{const{status:i,order:o}=r.query;i&&o&&(l.message=`Order_No: ${o} Status:${i}`,l.isShow=!0,l.timeout=1e4,l.noticeType(!0)),d.replace("/order"),await s.getOrder(),console.log(s.orderList)}catch{d.replace("/login")}});async function c(i){console.log(i.id);try{await s.getOrderDetail(i.id),a.value=!0,console.log(s.orderDetail)}catch{}}return(i,o)=>{const $=E;return n(),y("div",null,[t(v,{class:"mx-auto"},{default:e(()=>[t(U,{color:"primary"},{default:e(()=>[t(H,null,{default:e(()=>[p("Order History")]),_:1}),t(M)]),_:1}),t(Y,null,{default:e(()=>[(n(!0),y(x,null,C(f(s).orderList,u=>(n(),_(z,{key:u.id,title:`Order No : ${u.order_no}`,subtitle:`Status : ${u.payment_status}`},{prepend:e(()=>[t(j,null,{default:e(()=>[u.payment_status==="paid"?(n(),_(k,{key:0,color:"success"},{default:e(()=>[p(g("mdi-clipboard-text"))]),_:1})):(n(),_(k,{key:1,color:"error"},{default:e(()=>[p(g("mdi-error"))]),_:1}))]),_:2},1024)]),append:e(()=>[t(S,{onClick:G=>c(u),color:"grey-lighten-1",icon:"mdi-receipt-text-check-outline",variant:"text"},null,8,["onClick"])]),_:2},1032,["title","subtitle"]))),128))]),_:1})]),_:1}),t($,{isDialogVisible:f(a),"onUpdate:isDialogVisible":o[0]||(o[0]=u=>P(a)?a.value=u:null)},null,8,["isDialogVisible"]),F])}}};export{ae as default};
