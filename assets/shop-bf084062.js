import{u as Q}from"./cart-76d63909.js";import{al as X,r as B,am as H,aI as Y,I as Z,an as w,aJ as ee,ao as ae,aK as te,aL as se,aq as ne,aM as le,ar as ie,as as re,aN as oe,ah as ue,ax as ce,aO as de,aP as ve,aQ as fe,aR as M,aS as ge,s as p,aT as A,av as _,L as be,d as i,m as V,N as S,aU as E,n as q,$ as me,p as ye,a as he,aV as _e,aG as pe,aa as Le,o as I,x as z,e as C,w as x,G as xe,A as Ve,f as R,c as N,g as ke,i as j,j as G,h as Pe,V as Se}from"./index-4d7bce60.js";import{a as Ie,V as Re}from"./VRow-2d51bd7c.js";import{V as we,a as Ae}from"./VToolbar-303bfef3.js";import{V as Ce}from"./VDivider-e667177b.js";const Be=X("race",()=>{const e=B({}),b=B({});async function s(r=1){try{const{data:t}=await H.get(`/races/?page=${r}`);b.value=t}catch(t){return Promise.reject(t)}}return{race:e,raceList:b,fetchRaceList:s}});function $e(){const e=B([]);Y(()=>e.value=[]);function b(s,r){e.value[r]=s}return{refs:e,updateRef:b}}const Fe=Z()({name:"VPagination",props:{activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:w,default:"$first"},prevIcon:{type:w,default:"$prev"},nextIcon:{type:w,default:"$next"},lastIcon:{type:w,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ee(),...ae(),...te(),...se(),...ne(),...le(),...ie({tag:"nav"}),...re(),...oe({variant:"text"})},emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,b){let{slots:s,emit:r}=b;const t=ue(e,"modelValue"),{t:m,n:$}=ce(),{isRtl:L}=de(),{themeClasses:F}=ve(e),{width:o}=fe(),v=B(-1);M(void 0,{scoped:!0});const{resizeRef:g}=ge(a=>{if(!a.length)return;const{target:n,contentRect:l}=a[0],d=n.querySelector(".v-pagination__list > *");if(!d)return;const f=l.width,P=d.offsetWidth+parseFloat(getComputedStyle(d).marginRight)*2;v.value=T(f,P)}),u=p(()=>parseInt(e.length,10)),c=p(()=>parseInt(e.start,10)),y=p(()=>e.totalVisible?parseInt(e.totalVisible,10):v.value>=0?v.value:T(o.value,58));function T(a,n){const l=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((a-n*l)/n).toFixed(2)))}const K=p(()=>{if(u.value<=0||isNaN(u.value)||u.value>Number.MAX_SAFE_INTEGER)return[];if(y.value<=1)return[t.value];if(u.value<=y.value)return A(u.value,c.value);const a=y.value%2===0,n=a?y.value/2:Math.floor(y.value/2),l=a?n:n+1,d=u.value-n;if(l-t.value>=0)return[...A(Math.max(1,y.value-1),c.value),e.ellipsis,u.value];if(t.value-d>=(a?1:0)){const f=y.value-1,P=u.value-f+c.value;return[c.value,e.ellipsis,...A(f,P)]}else{const f=Math.max(1,y.value-3),P=f===1?t.value:t.value-Math.ceil(f/2)+c.value;return[c.value,e.ellipsis,...A(f,P),e.ellipsis,u.value]}});function k(a,n,l){a.preventDefault(),t.value=n,l&&r(l,n)}const{refs:O,updateRef:U}=$e();M({VPaginationBtn:{color:_(e,"color"),border:_(e,"border"),density:_(e,"density"),size:_(e,"size"),variant:_(e,"variant"),rounded:_(e,"rounded"),elevation:_(e,"elevation")}});const W=p(()=>K.value.map((a,n)=>{const l=d=>U(d,n);if(typeof a=="string")return{isActive:!1,key:`ellipsis-${n}`,page:a,props:{ref:l,ellipsis:!0,icon:!0,disabled:!0}};{const d=a===t.value;return{isActive:d,key:a,page:$(a),props:{ref:l,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:d?e.activeColor:e.color,ariaCurrent:d,ariaLabel:m(d?e.currentPageAriaLabel:e.pageAriaLabel,a),onClick:f=>k(f,a)}}}})),h=p(()=>{const a=!!e.disabled||t.value<=c.value,n=!!e.disabled||t.value>=c.value+u.value-1;return{first:e.showFirstLastPage?{icon:L.value?e.lastIcon:e.firstIcon,onClick:l=>k(l,c.value,"first"),disabled:a,ariaLabel:m(e.firstAriaLabel),ariaDisabled:a}:void 0,prev:{icon:L.value?e.nextIcon:e.prevIcon,onClick:l=>k(l,t.value-1,"prev"),disabled:a,ariaLabel:m(e.previousAriaLabel),ariaDisabled:a},next:{icon:L.value?e.prevIcon:e.nextIcon,onClick:l=>k(l,t.value+1,"next"),disabled:n,ariaLabel:m(e.nextAriaLabel),ariaDisabled:n},last:e.showFirstLastPage?{icon:L.value?e.firstIcon:e.lastIcon,onClick:l=>k(l,c.value+u.value-1,"last"),disabled:n,ariaLabel:m(e.lastAriaLabel),ariaDisabled:n}:void 0}});function D(){var n;const a=t.value-c.value;(n=O.value[a])==null||n.$el.focus()}function J(a){a.key===E.left&&!e.disabled&&t.value>+e.start?(t.value=t.value-1,q(D)):a.key===E.right&&!e.disabled&&t.value<c.value+u.value-1&&(t.value=t.value+1,q(D))}return be(()=>i(e.tag,{ref:g,class:["v-pagination",F.value,e.class],style:e.style,role:"navigation","aria-label":m(e.ariaLabel),onKeydown:J,"data-test":"v-pagination-root"},{default:()=>[i("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&i("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[s.first?s.first(h.value.first):i(V,S({_as:"VPaginationBtn"},h.value.first),null)]),i("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[s.prev?s.prev(h.value.prev):i(V,S({_as:"VPaginationBtn"},h.value.prev),null)]),W.value.map((a,n)=>i("li",{key:a.key,class:["v-pagination__item",{"v-pagination__item--is-active":a.isActive}],"data-test":"v-pagination-item"},[s.item?s.item(a):i(V,S({_as:"VPaginationBtn"},a.props),{default:()=>[a.page]})])),i("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[s.next?s.next(h.value.next):i(V,S({_as:"VPaginationBtn"},h.value.next),null)]),e.showFirstLastPage&&i("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[s.last?s.last(h.value.last):i(V,S({_as:"VPaginationBtn"},h.value.last),null)])])]})),{}}}),Ne={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pt-3"},Te={class:"text-sm text-disabled mb-0"},De={class:"text-center"},Me={__name:"shop",setup(e){const b=Q(),s=Be(),r=ye(),t=he(),m=_e();pe(async()=>{try{const{page:o}=m.query;o?s.fetchRaceList(o):s.fetchRaceList()}catch{}}),Le(()=>{const{page:o}=t.currentRoute.value.query;o&&s.fetchRaceList(o)});async function $(o){s.fetchRaceList(o),t.push({query:{page:o}})}const L=p(()=>s.raceList.data);async function F(o){try{await b.addItem(o,1),r.message="Added Successfully",r.isShow=!0,r.timeout=1500,r.noticeType(!0)}catch(v){if(console.log(v),v.response.status===401)return t.push("/login");r.message=v.response.data.message,r.isShow=!0,r.timeout=1e4,r.noticeType(!1)}}return(o,v)=>(I(),z("div",null,[C("section",null,[i(Re,null,{default:x(()=>[(I(!0),z(xe,null,Ve(R(L),g=>(I(),N(Ie,{key:g.name,cols:"12",sm:"6",md:"3"},{default:x(()=>[i(ke,null,{default:x(()=>[i(we,{color:"rgba(100, 0, 0, 0)"},{default:x(()=>[i(Ae,{class:"text-h6 pokemon-name"},{default:x(()=>[j(G(g.name),1)]),_:2},1024),g.stock?(I(),N(V,{key:0,icon:"mdi-cart-plus",color:"#00F3FF",onClick:u=>F(g.id)},null,8,["onClick"])):(I(),N(Pe,{key:1,class:"flex-grow-0"},{default:x(()=>[j("Sold Out")]),_:1}))]),_:2},1024),i(Se,{class:"align-end text-white mb-3",height:"96",src:g.photo},null,8,["src"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),C("section",Ne,[i(Ce),C("p",Te," total:"+G(R(s).raceList.total),1),C("div",De,[i(Fe,{modelValue:R(s).raceList.current_page,"onUpdate:modelValue":[v[0]||(v[0]=g=>R(s).raceList.current_page=g),$],"total-visible":5,length:R(s).raceList.last_page,rounded:"circle"},null,8,["modelValue","length"])])])]))}},Ke=me(Me,[["__scopeId","data-v-1b162b29"]]);export{Ke as default};
