import{_ as ke}from"./DialogCloseBtn-c3f54192.js";import{I as xe,aC as Se,ax as De,ah as we,s as z,aD as Z,r as b,a0 as ue,L as Ie,M as Pe,d as e,N as G,G as E,ak as Re,n as $e,aE as Fe,aF as H,o as v,c as D,w as t,g as T,a1 as re,a4 as Ue,i as f,h as P,k as Be,f as i,V as Y,y as J,m as w,e as g,j as S,al as ze,am as ee,$ as Le,u as je,p as Ae,a as Ee,aG as Te,x as L,a6 as Me,A as te,aH as Ne,a7 as Qe,l as ae,ad as qe,ae as Ge}from"./index-4d7bce60.js";import{V as He}from"./VForm-3d24171d.js";import{V as A,a as C}from"./VRow-2d51bd7c.js";import{m as Oe,c as Ye,u as Je,b as le,f as Ke,d as We,e as Xe,V as se,a as Ze}from"./VTextField-429fffb8.js";import{V as et}from"./VChip-cdab34cc.js";import{V as ce}from"./VDialog-e43dd751.js";import{a as tt}from"./formatters-1588bd0d.js";import{V as O}from"./VDivider-e667177b.js";import{V as oe,a as j,b as ne,c as ie,d as at}from"./VList-c122c8f0.js";import"./dialog-transition-5a768d73.js";const lt=xe()({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:a=>typeof a=="boolean"||[1e3,1024].includes(a)},...Oe({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:a=>Se(a).every(l=>l!=null&&typeof l=="object")},...Ye({clearable:!0})},emits:{"click:control":a=>!0,"mousedown:control":a=>!0,"update:focused":a=>!0,"update:modelValue":a=>!0},setup(a,l){let{attrs:r,emit:s,slots:c}=l;const{t:V}=De(),u=we(a,"modelValue"),{isFocused:y,focus:k,blur:d}=Je(a),_=z(()=>typeof a.showSize!="boolean"?a.showSize:void 0),I=z(()=>(u.value??[]).reduce((n,h)=>{let{size:F=0}=h;return n+F},0)),x=z(()=>Z(I.value,_.value)),m=z(()=>(u.value??[]).map(n=>{const{name:h="",size:F=0}=n;return a.showSize?`${h} (${Z(F,_.value)})`:h})),p=z(()=>{var h;const n=((h=u.value)==null?void 0:h.length)??0;return a.showSize?V(a.counterSizeString,n,x.value):V(a.counterString,n)}),M=b(),N=b(),o=b();function R(){var n;o.value!==document.activeElement&&((n=o.value)==null||n.focus()),y.value||k()}function de(n){K(n)}function fe(n){s("mousedown:control",n)}function K(n){var h;(h=o.value)==null||h.click(),s("click:control",n)}function me(n){n.stopPropagation(),R(),$e(()=>{u.value=[],Fe(a["onClick:clear"],n)})}return ue(u,n=>{(!Array.isArray(n)||!n.length)&&o.value&&(o.value.value="")}),Ie(()=>{const n=!!(c.counter||a.counter),h=!!(n||c.details),[F,pe]=Pe(r),[{modelValue:xt,..._e}]=le.filterProps(a),[ve]=Ke(a);return e(le,G({ref:M,modelValue:u.value,"onUpdate:modelValue":U=>u.value=U,class:["v-file-input",a.class],style:a.style,"onClick:prepend":de},F,_e,{focused:y.value}),{...c,default:U=>{let{id:Q,isDisabled:B,isDirty:W,isReadonly:ge,isValid:ye}=U;return e(We,G({ref:N,"prepend-icon":a.prependIcon,onMousedown:fe,onClick:K,"onClick:clear":me,"onClick:prependInner":a["onClick:prependInner"],"onClick:appendInner":a["onClick:appendInner"]},ve,{id:Q.value,active:W.value||y.value,dirty:W.value,disabled:B.value,focused:y.value,error:ye.value===!1}),{...c,default:he=>{var X;let{props:{class:Ve,...be}}=he;return e(E,null,[e("input",G({ref:o,type:"file",readonly:ge.value,disabled:B.value,multiple:a.multiple,name:a.name,onClick:$=>{$.stopPropagation(),R()},onChange:$=>{if(!$.target)return;const Ce=$.target;u.value=[...Ce.files??[]]},onFocus:R,onBlur:d},be,pe),null),e("div",{class:Ve},[!!((X=u.value)!=null&&X.length)&&(c.selection?c.selection({fileNames:m.value,totalBytes:I.value,totalBytesReadable:x.value}):a.chips?m.value.map($=>e(et,{key:$,size:"small",color:a.color},{default:()=>[$]})):m.value.join(", "))])])}})},details:h?U=>{var Q,B;return e(E,null,[(Q=c.details)==null?void 0:Q.call(c,U),n&&e(E,null,[e("span",null,null),e(Xe,{active:!!((B=u.value)!=null&&B.length),value:p.value},c.counter)])])}:void 0})}),Re({},M,N,o)}}),st=g("p",{class:"mb-0"},"Updating user details will receive a privacy audit.",-1),ot={__name:"UserInfoEditDialog",props:{userData:{type:Object,required:!1,default:()=>({id:0,name:"",email:"",photo:""})},isDialogVisible:{type:Boolean,required:!0}},emits:["submit","update:isDialogVisible"],setup(a,{emit:l}){const r=a,s=b(structuredClone(H(r.userData)));ue(r,()=>{s.value=structuredClone(H(r.userData))});const c=()=>{l("update:isDialogVisible",!1);const d=new FormData;d.append("name",s.value.name),s.value.file&&d.append("userPhoto",s.value.file),l("submit",d)},V=()=>{l("update:isDialogVisible",!1),s.value=structuredClone(H(r.userData))},u=d=>{l("update:isDialogVisible",d)},y=d=>{const _=d.target.files[0],I=URL.createObjectURL(_);s.value.photo=I,s.value.file=_},k=d=>{s.value.name=d};return(d,_)=>{const I=ke;return v(),D(ce,{width:d.$vuetify.display.smAndDown?"auto":500,"model-value":r.isDialogVisible,"onUpdate:modelValue":u},{default:t(()=>[e(I,{onClick:_[0]||(_[0]=x=>u(!1))}),e(T,{class:"pa-sm-8 pa-5"},{default:t(()=>[e(re,{class:"text-center"},{default:t(()=>[e(Ue,{class:"text-h5 mb-3"},{default:t(()=>[f(" Edit User Information ")]),_:1}),st]),_:1}),e(P,null,{default:t(()=>[e(He,{class:"mt-6",onSubmit:Be(c,["prevent"])},{default:t(()=>[e(A,null,{default:t(()=>[e(C,{cols:"12"},{default:t(()=>[i(s).photo?(v(),D(Y,{key:0,md:"8",src:i(s).photo,height:"100"},null,8,["src"])):J("",!0)]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(se,null,{default:t(()=>[f("Photo:")]),_:1}),e(lt,{md:"4",accept:"image/png, image/jpeg","prepend-icon":"mdi-camera","show-size":"1000",onInput:_[1]||(_[1]=x=>y(x))})]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(se,null,{default:t(()=>[f("Username:")]),_:1}),e(Ze,{value:i(s).name,onInput:_[2]||(_[2]=x=>k(x.target.value))},null,8,["value"])]),_:1}),e(C,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:t(()=>[e(w,{type:"submit"},{default:t(()=>[f(" Submit ")]),_:1}),e(w,{color:"secondary",variant:"tonal",onClick:V},{default:t(()=>[f(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},nt=g("span",{class:"text-5xl"},"!",-1),it={class:"text-lg font-weight-medium"},ut={__name:"ConfirmDialog",props:{confirmationQuestion:{type:String,required:!0},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","confirm"],setup(a,{emit:l}){const r=a,s=b(!1),c=b(!1),V=k=>{l("update:isDialogVisible",k)},u=()=>{l("confirm",!0),V(!1),s.value=!0},y=()=>{l("confirm",!1),l("update:isDialogVisible",!1),c.value=!0};return(k,d)=>(v(),D(ce,{"max-width":"500","model-value":r.isDialogVisible,"onUpdate:modelValue":V},{default:t(()=>[e(T,{class:"text-center px-10 py-6"},{default:t(()=>[e(P,null,{default:t(()=>[e(w,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[nt]),_:1}),g("h6",it,S(r.confirmationQuestion),1)]),_:1}),e(P,{class:"d-flex align-center justify-center gap-2"},{default:t(()=>[e(w,{color:"success",variant:"tonal",onClick:y},{default:t(()=>[f(" Cancel ")]),_:1}),e(w,{color:"error",variant:"elevated",onClick:u},{default:t(()=>[f(" Confirm ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},rt=ze("pokemon",()=>{const a=b({});async function l(){try{const{data:s}=await ee.get("/pokemons");a.value=s.data}catch(s){return Promise.reject(s)}}async function r(s){try{await ee.delete(`/pokemons/${s}`)}catch(c){return Promise.reject(c)}}return{pokemonList:a,getPokemon:l,deletePokemon:r}});const q=a=>(qe("data-v-084e0d1f"),a=a(),Ge(),a),ct=q(()=>g("div",{class:"pa-4"},"User Profile",-1)),dt={key:1,class:"text-5xl font-weight-medium"},ft={class:"text-h4 mt-4"},mt=q(()=>g("span",{class:"text-sm text-uppercase text-disabled"},"Details",-1)),pt={class:"text-h6"},_t={class:"text-body-1"},vt={class:"text-h6"},gt={class:"text-body-1"},yt={class:"d-flex justify-space-between align-center"},ht=q(()=>g("div",{class:"pa-4"},"Pokémon you own",-1)),Vt={class:"d-flex py-3 justify-space-between"},bt={key:0},Ct=q(()=>g("p",null,"You don't have any Pokémon.",-1)),kt={__name:"user",setup(a){const l=je(),r=rt(),s=Ae(),c=Ee(),V=b(!1),u=b(!1),y=b(!1),k=b(""),d=b(0);Te(async()=>{try{await l.getInfo(),await r.getPokemon()}catch{c.replace("/login")}});async function _(m){try{await l.updateInfo(m),s.noticeSetting({message:"Profile update success",isShow:!0,timeout:5e3,noticeType:!0}),l.getInfo()}catch(p){s.noticeSetting({message:p,isShow:!0,timeout:5e3,noticeType:!1})}}function I(m){const p=(m.name||m.race).charAt(0).toUpperCase()+(m.name||m.race).slice(1);k.value=`Please make sure to release 【${p}】`,d.value=m.id,y.value=!0}async function x(m){if(m)try{await r.deletePokemon(d.value),s.noticeSetting({message:"Release Success",isShow:!0,timeout:5e3,noticeType:!0}),r.getPokemon()}catch{}}return(m,p)=>{const M=ut,N=ot;return v(),L("div",null,[e(A,null,{default:t(()=>[e(C,{cols:"12",md:"3"},{default:t(()=>[ct,i(l).user?(v(),D(T,{key:0},{default:t(()=>[e(P,{class:"text-center pt-15"},{default:t(()=>[e(Me,{rounded:"",size:100,color:i(l).user.avatar?void 0:"primary",variant:i(l).user.avatar?void 0:"tonal"},{default:t(()=>[i(l).user.photo?(v(),D(Y,{key:0,src:i(l).user.photo},null,8,["src"])):(v(),L("span",dt,S(i(tt)(i(l).user.name)),1))]),_:1},8,["color","variant"]),g("h6",ft,S(i(l).user.name),1)]),_:1}),e(O),e(P,null,{default:t(()=>[mt,e(oe,{class:"card-list mt-2"},{default:t(()=>[e(j,null,{default:t(()=>[e(ne,null,{default:t(()=>[g("h6",pt,[f(" Username: "),g("span",_t,S(i(l).user.name),1)])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(ne,null,{default:t(()=>[g("h6",vt,[f(" Email: "),g("span",gt,S(i(l).user.email),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{class:"d-flex justify-center"},{default:t(()=>[e(w,{variant:"elevated",class:"me-4",onClick:p[0]||(p[0]=o=>V.value=!0)},{default:t(()=>[f(" Edit ")]),_:1})]),_:1})]),_:1})):J("",!0)]),_:1}),e(C,{cols:"12",md:"9"},{default:t(()=>[g("div",yt,[ht,e(w,{onClick:p[1]||(p[1]=o=>u.value=!i(u))},{default:t(()=>[f(S(i(u)?"Hide":"Details"),1)]),_:1})]),i(r).pokemonList.length?(v(),D(A,{key:0},{default:t(()=>[(v(!0),L(E,null,te(i(r).pokemonList,o=>(v(),D(C,{key:o.id,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(T,{class:"mx-auto"},{default:t(()=>[e(re,{class:"pb-0",subtitle:o.name?o.name:o.race},null,8,["subtitle"]),e(P,{class:"py-0"},{default:t(()=>[e(A,{align:"center","no-gutters":""},{default:t(()=>[e(C,{class:"text-h3",cols:"8"},{default:t(()=>[f("LV."+S(o.level),1)]),_:2},1024),e(C,{cols:"4",class:"text-right"},{default:t(()=>[e(Y,{src:o.photo},null,8,["src"])]),_:2},1024)]),_:2},1024)]),_:2},1024),g("div",Vt,[e(j,{density:"compact","prepend-icon":"mdi-fire"},{default:t(()=>[e(ie,null,{default:t(()=>[f(S(o.ability),1)]),_:2},1024)]),_:2},1024),e(j,{density:"compact","prepend-icon":"mdi-head-snowflake-outline"},{default:t(()=>[e(ie,null,{default:t(()=>[f(S(o.nature),1)]),_:2},1024)]),_:2},1024)]),e(Ne,null,{default:t(()=>[i(u)?(v(),L("div",bt,[e(O),e(oe,{class:"bg-transparent"},{default:t(()=>[e(at,null,{default:t(()=>[f("Skills")]),_:1}),(v(!0),L(E,null,te(o.skills,R=>(v(),D(j,{key:R,title:R,"prepend-icon":"mdi-circle-medium"},null,8,["title"]))),128))]),_:2},1024)])):J("",!0)]),_:2},1024),e(O),e(Qe,{class:"pa-2 d-flex align-center justify-center"},{default:t(()=>[e(w,{onClick:R=>I(o),color:"error"},{default:t(()=>[f("Release ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(v(),D(A,{key:1},{default:t(()=>[e(C,null,{default:t(()=>[e(T,null,{default:t(()=>[e(P,{class:"text-center"},{default:t(()=>[e(w,{to:"/shop",class:"my-12"},{default:t(()=>[f(" Go to Shop ")]),_:1}),Ct]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1}),e(M,{isDialogVisible:i(y),"onUpdate:isDialogVisible":p[2]||(p[2]=o=>ae(y)?y.value=o:null),confirmationQuestion:i(k),onConfirm:x},null,8,["isDialogVisible","confirmationQuestion"]),e(N,{isDialogVisible:i(V),"onUpdate:isDialogVisible":p[3]||(p[3]=o=>ae(V)?V.value=o:null),"user-data":i(l).user,onSubmit:_},null,8,["isDialogVisible","user-data"])])}}},Lt=Le(kt,[["__scopeId","data-v-084e0d1f"]]);export{Lt as default};
