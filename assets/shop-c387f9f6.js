import{u as Q}from"./cart-b3ea6918.js";import{al as X,r as $,am as F,aH as Y,I as Z,an as A,aI as ee,ao as ae,aJ as te,aK as se,aq as ne,aL as ie,ar as le,as as re,aM as ue,ah as oe,ax as ce,aN as de,aO as ve,aP as fe,aQ as E,aR as ge,s as L,aS as C,av as _,L as me,d as l,m as k,N as I,aT as q,n as z,$ as ye,p as be,a as he,aU as pe,aG as _e,aa as Le,o as R,x as j,e as B,w as V,G as xe,A as Ve,f as w,c as N,g as ke,i as G,j as K,h as Se,V as Pe}from"./index-6f3c4197.js";import{a as Ie,V as Re}from"./VRow-31f1bb8d.js";import{V as we,a as Ae}from"./VToolbar-94627374.js";import{V as Ce}from"./VDivider-8c007220.js";const Be=X("race",()=>{const e=$({}),b=$({});async function t(u=1){b.value=await F.get(`/races/?page=${u}`).then(d=>{if(d.status===200)return d.data})}async function r(u){try{return await F.post("/races",u).then(d=>d.status===200?{type:"positive",message:"Success"}:{type:"negative",message:"failed"})}catch{return{type:"negative",message:"failed"}}}async function s(u){try{return await F.patch("/races",u).then(d=>d.status===200?{type:"positive",message:"Success"}:{type:"negative",message:"failed"})}catch{return{type:"negative",message:"failed"}}}return{race:e,raceList:b,fetchRaceList:t,createData:r,updateData:s}});function $e(){const e=$([]);Y(()=>e.value=[]);function b(t,r){e.value[r]=t}return{refs:e,updateRef:b}}const De=Z()({name:"VPagination",props:{activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:A,default:"$first"},prevIcon:{type:A,default:"$prev"},nextIcon:{type:A,default:"$next"},lastIcon:{type:A,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ee(),...ae(),...te(),...se(),...ne(),...ie(),...le({tag:"nav"}),...re(),...ue({variant:"text"})},emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,b){let{slots:t,emit:r}=b;const s=oe(e,"modelValue"),{t:u,n:d}=ce(),{isRtl:x}=de(),{themeClasses:D}=ve(e),{width:o}=fe(),g=$(-1);E(void 0,{scoped:!0});const{resizeRef:y}=ge(a=>{if(!a.length)return;const{target:n,contentRect:i}=a[0],f=n.querySelector(".v-pagination__list > *");if(!f)return;const m=i.width,P=f.offsetWidth+parseFloat(getComputedStyle(f).marginRight)*2;g.value=T(m,P)}),c=L(()=>parseInt(e.length,10)),v=L(()=>parseInt(e.start,10)),h=L(()=>e.totalVisible?parseInt(e.totalVisible,10):g.value>=0?g.value:T(o.value,58));function T(a,n){const i=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((a-n*i)/n).toFixed(2)))}const O=L(()=>{if(c.value<=0||isNaN(c.value)||c.value>Number.MAX_SAFE_INTEGER)return[];if(h.value<=1)return[s.value];if(c.value<=h.value)return C(c.value,v.value);const a=h.value%2===0,n=a?h.value/2:Math.floor(h.value/2),i=a?n:n+1,f=c.value-n;if(i-s.value>=0)return[...C(Math.max(1,h.value-1),v.value),e.ellipsis,c.value];if(s.value-f>=(a?1:0)){const m=h.value-1,P=c.value-m+v.value;return[v.value,e.ellipsis,...C(m,P)]}else{const m=Math.max(1,h.value-3),P=m===1?s.value:s.value-Math.ceil(m/2)+v.value;return[v.value,e.ellipsis,...C(m,P),e.ellipsis,c.value]}});function S(a,n,i){a.preventDefault(),s.value=n,i&&r(i,n)}const{refs:U,updateRef:W}=$e();E({VPaginationBtn:{color:_(e,"color"),border:_(e,"border"),density:_(e,"density"),size:_(e,"size"),variant:_(e,"variant"),rounded:_(e,"rounded"),elevation:_(e,"elevation")}});const H=L(()=>O.value.map((a,n)=>{const i=f=>W(f,n);if(typeof a=="string")return{isActive:!1,key:`ellipsis-${n}`,page:a,props:{ref:i,ellipsis:!0,icon:!0,disabled:!0}};{const f=a===s.value;return{isActive:f,key:a,page:d(a),props:{ref:i,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:f?e.activeColor:e.color,ariaCurrent:f,ariaLabel:u(f?e.currentPageAriaLabel:e.pageAriaLabel,a),onClick:m=>S(m,a)}}}})),p=L(()=>{const a=!!e.disabled||s.value<=v.value,n=!!e.disabled||s.value>=v.value+c.value-1;return{first:e.showFirstLastPage?{icon:x.value?e.lastIcon:e.firstIcon,onClick:i=>S(i,v.value,"first"),disabled:a,ariaLabel:u(e.firstAriaLabel),ariaDisabled:a}:void 0,prev:{icon:x.value?e.nextIcon:e.prevIcon,onClick:i=>S(i,s.value-1,"prev"),disabled:a,ariaLabel:u(e.previousAriaLabel),ariaDisabled:a},next:{icon:x.value?e.prevIcon:e.nextIcon,onClick:i=>S(i,s.value+1,"next"),disabled:n,ariaLabel:u(e.nextAriaLabel),ariaDisabled:n},last:e.showFirstLastPage?{icon:x.value?e.firstIcon:e.lastIcon,onClick:i=>S(i,v.value+c.value-1,"last"),disabled:n,ariaLabel:u(e.lastAriaLabel),ariaDisabled:n}:void 0}});function M(){var n;const a=s.value-v.value;(n=U.value[a])==null||n.$el.focus()}function J(a){a.key===q.left&&!e.disabled&&s.value>+e.start?(s.value=s.value-1,z(M)):a.key===q.right&&!e.disabled&&s.value<v.value+c.value-1&&(s.value=s.value+1,z(M))}return me(()=>l(e.tag,{ref:y,class:["v-pagination",D.value,e.class],style:e.style,role:"navigation","aria-label":u(e.ariaLabel),onKeydown:J,"data-test":"v-pagination-root"},{default:()=>[l("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&l("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[t.first?t.first(p.value.first):l(k,I({_as:"VPaginationBtn"},p.value.first),null)]),l("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[t.prev?t.prev(p.value.prev):l(k,I({_as:"VPaginationBtn"},p.value.prev),null)]),H.value.map((a,n)=>l("li",{key:a.key,class:["v-pagination__item",{"v-pagination__item--is-active":a.isActive}],"data-test":"v-pagination-item"},[t.item?t.item(a):l(k,I({_as:"VPaginationBtn"},a.props),{default:()=>[a.page]})])),l("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[t.next?t.next(p.value.next):l(k,I({_as:"VPaginationBtn"},p.value.next),null)]),e.showFirstLastPage&&l("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[t.last?t.last(p.value.last):l(k,I({_as:"VPaginationBtn"},p.value.last),null)])])]})),{}}}),Fe={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pt-3"},Ne={class:"text-sm text-disabled mb-0"},Te={class:"text-center"},Me={__name:"shop",setup(e){const b=Q(),t=Be(),r=be(),s=he(),u=pe();_e(async()=>{try{const{page:o}=u.query;o?t.fetchRaceList(o):t.fetchRaceList()}catch{}}),Le(()=>{const{page:o}=s.currentRoute.value.query;o&&t.fetchRaceList(o)});async function d(o){t.fetchRaceList(o),s.push({query:{page:o}})}const x=L(()=>t.raceList.data);async function D(o){try{await b.addItem(o,1),r.message="Added Successfully",r.isShow=!0,r.timeout=1500,r.noticeType(!0)}catch(g){if(console.log(g),g.response.status===401)return s.push("/login");r.message=g.response.data.message,r.isShow=!0,r.timeout=1e4,r.noticeType(!1)}}return(o,g)=>(R(),j("div",null,[B("section",null,[l(Re,null,{default:V(()=>[(R(!0),j(xe,null,Ve(w(x),y=>(R(),N(Ie,{key:y.name,cols:"12",sm:"6",md:"3"},{default:V(()=>[l(ke,null,{default:V(()=>[l(we,{color:"rgba(100, 0, 0, 0)"},{default:V(()=>[l(Ae,{class:"text-h6 pokemon-name"},{default:V(()=>[G(K(y.name),1)]),_:2},1024),y.stock?(R(),N(k,{key:0,icon:"mdi-cart-plus",color:"#00F3FF",onClick:c=>D(y.id)},null,8,["onClick"])):(R(),N(Se,{key:1,class:"flex-grow-0"},{default:V(()=>[G("Sold Out")]),_:1}))]),_:2},1024),l(Pe,{class:"align-end text-white mb-3",height:"96",src:y.photo},null,8,["src"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),B("section",Fe,[l(Ce),B("p",Ne," total:"+K(w(t).raceList.total),1),B("div",Te,[l(De,{modelValue:w(t).raceList.current_page,"onUpdate:modelValue":[g[0]||(g[0]=y=>w(t).raceList.current_page=y),d],"total-visible":5,length:w(t).raceList.last_page,rounded:"circle"},null,8,["modelValue","length"])])])]))}},Ke=ye(Me,[["__scopeId","data-v-99dc4418"]]);export{Ke as default};
